(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7966],{90244:function(e,n,t){"use strict";var a=t(64836);n.Z=void 0;var i=a(t(64938)),s=t(85893),r=(0,i.default)([(0,s.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,s.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");n.Z=r},67599:function(e,n,t){"use strict";var a=t(64836);n.Z=void 0;var i=a(t(64938)),s=t(85893),r=(0,i.default)((0,s.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15-5-2.18L7 18V5h10v13z"}),"BookmarkBorder");n.Z=r},60888:function(e,n,t){"use strict";var a=t(64836);n.Z=void 0;var i=a(t(64938)),s=t(85893),r=(0,i.default)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");n.Z=r},25883:function(e,n,t){"use strict";var a=t(64836);n.Z=void 0;var i=a(t(64938)),s=t(85893),r=(0,i.default)((0,s.jsx)("path",{d:"M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z"}),"ContentCut");n.Z=r},13540:function(e,n,t){"use strict";var a=t(64836);n.Z=void 0;var i=a(t(64938)),s=t(85893),r=(0,i.default)((0,s.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout");n.Z=r},87357:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var a=t(87462),i=t(63366),s=t(67294),r=t(90512),o=t(49731),l=t(86523),c=t(39707),d=t(96682),u=t(85893);let h=["className","component"];var m=t(37078),x=t(68239),f=t(10606);let p=(0,x.Z)(),_=function(e={}){let{themeId:n,defaultTheme:t,defaultClassName:m="MuiBox-root",generateClassName:x}=e,f=(0,o.ZP)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(l.Z),p=s.forwardRef(function(e,s){let o=(0,d.Z)(t),l=(0,c.Z)(e),{className:p,component:_="div"}=l,v=(0,i.Z)(l,h);return(0,u.jsx)(f,(0,a.Z)({as:_,ref:s,className:(0,r.Z)(p,x?x(m):m),theme:n&&o[n]||o},v))});return p}({themeId:f.Z,defaultTheme:p,defaultClassName:"MuiBox-root",generateClassName:m.Z.generate});var v=_},39707:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var a=t(87462),i=t(63366),s=t(59766),r=t(44920);let o=["sx"],l=e=>{var n,t;let a={systemProps:{},otherProps:{}},i=null!=(n=null==e||null==(t=e.theme)?void 0:t.unstable_sxConfig)?n:r.Z;return Object.keys(e).forEach(n=>{i[n]?a.systemProps[n]=e[n]:a.otherProps[n]=e[n]}),a};function c(e){let n;let{sx:t}=e,r=(0,i.Z)(e,o),{systemProps:c,otherProps:d}=l(r);return n=Array.isArray(t)?[c,...t]:"function"==typeof t?(...e)=>{let n=t(...e);return(0,s.P)(n)?(0,a.Z)({},c,n):c}:(0,a.Z)({},c,t),(0,a.Z)({},d,{sx:n})}},682:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return t(41521)}])},1935:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var a=t(85893),i=t(67294),s=t(87357),r=t(83321),o=t(12463),l=t(40547),c=t.n(l),d=t(62344),u=t(9473),h=t(41602),m=t(11163);function x(e){let{open:n,setOpen:t}=e,l=(0,u.I0)(),x=(0,m.useRouter)(),[f,p]=(0,i.useState)(""),_=async e=>{e.preventDefault();try{await l((0,d.Ew)()),p("Вы вышли из аккаунта"),t(!1),l((0,h.bV)({isLogin:!1,user:"",isAdmin:!1})),x.push("/")}catch(e){console.log(e)}};return(0,a.jsx)(o.Z,{open:n,onClose:()=>t(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsx)(s.Z,{className:c().box,children:(0,a.jsxs)("div",{className:c().mainContainer,children:[f.length>0&&(0,a.jsx)("p",{children:f}),(0,a.jsx)("div",{className:c().questionContainer,children:(0,a.jsx)("h3",{children:"Вы уверены, что хотите выйти из аккаунта?"})}),(0,a.jsxs)("div",{className:c().buttonContainer,children:[(0,a.jsx)(r.Z,{onClick:()=>t(!1),className:c().button,type:"submit",variant:"contained",color:"secondary",children:"Отмена"}),(0,a.jsx)(r.Z,{onClick:_,className:c().buttonExit,type:"submit",variant:"contained",color:"primary",children:"Выйти"})]})]})})})}},41521:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return B}});var a=t(85893),i=t(67294),s=t(83321),r=t(7561),o=t.n(r),l=t(13540),c=t(48572),d=t(63504),u=t.n(d),h=t(12463),m=t(87357),x=t(61903),f=t(14623),p=t.n(f);async function _(e,n,t,a,i){try{let s=await fetch("".concat("http://localhost:3377/api/","account/profile/editInfo"),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),r=await s.json(),{status:o}=await s;(403===o||404===o||500===o)&&i(r.message),200===o&&(i(r.message),t({...n,...e}),setTimeout(()=>{a(!1),i("")},2e3))}catch(e){console.log(e)}}function v(e){let{open:n,setOpen:t,userInfo:r,setUserInfo:o}=e,[l,c]=(0,i.useState)({full_name:(null==r?void 0:r.full_name)||"",phone:(null==r?void 0:r.phone)||"",telegram_instagram:(null==r?void 0:r.telegram_instagram)||""}),[d,u]=(0,i.useState)("");(0,i.useEffect)(()=>{c({full_name:(null==r?void 0:r.full_name)||"",phone:(null==r?void 0:r.phone)||"",telegram_instagram:(null==r?void 0:r.telegram_instagram)||""})},[r]);let f=e=>{c({...l,[e.target.name]:e.target.value})};return(0,a.jsx)(h.Z,{open:n,onClose:()=>t(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsx)(m.Z,{className:p().container,children:(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),_(l,r,o,t,u)},children:(0,a.jsxs)("div",{className:p().formDiv,children:[d.length>0&&(0,a.jsx)("div",{className:p().infoDiv,children:(0,a.jsx)("p",{className:p().infoP,children:d})}),(0,a.jsx)(x.Z,{autoComplete:"off",className:"text-field",label:"ФИО",name:"full_name",type:"text",value:(null==l?void 0:l.full_name)||"",fullWidth:!0,margin:"normal",required:!0,onChange:f}),(0,a.jsx)(x.Z,{autoComplete:"off",className:"text-field",label:"Номер телефона",name:"phone",type:"text",value:(null==l?void 0:l.phone)||"",fullWidth:!0,margin:"normal",onChange:f}),(0,a.jsx)(x.Z,{autoComplete:"off",className:"text-field",label:"Ваш Telegram/Instagram",name:"telegram_instagram",type:"text",value:(null==l?void 0:l.telegram_instagram)||"",fullWidth:!0,margin:"normal",onChange:f}),(0,a.jsx)(s.Z,{className:p().button,type:"submit",variant:"contained",color:"primary",style:{backgroundColor:"black",color:"white"},children:"Сохранить"})]})})})})}async function j(){try{let e=await fetch("".concat("http://localhost:3377/api/","account/profile/info"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),n=await e.json();return n}catch(e){console.log(e)}}function C(){let[e,n]=(0,i.useState)(!1),[t,r]=(0,i.useState)(void 0);return(0,i.useEffect)(()=>{let e=j();e.then(e=>{e&&Object.keys(e).length>0&&r(e)})},[]),(0,a.jsxs)("div",{className:u().mainDiv,children:[(0,a.jsx)("div",{className:u().mainContainer,children:(0,a.jsxs)("div",{className:u().container,children:[(0,a.jsxs)("div",{className:u().liContainer,children:[(0,a.jsx)("h5",{className:u().headerFive,children:"Электронная почта"}),(0,a.jsx)("div",{className:u().pContainer,children:(0,a.jsx)("p",{className:u().pFive,children:null==t?void 0:t.email})})]}),(0,a.jsxs)("div",{className:u().liContainer,children:[(0,a.jsx)("h5",{className:u().headerFive,children:"ФИО"}),(0,a.jsx)("p",{className:u().pFive,children:null==t?void 0:t.full_name})]}),(0,a.jsxs)("div",{className:u().liContainer,children:[(0,a.jsx)("h5",{className:u().headerFive,children:"Номер телефона"}),(0,a.jsx)("div",{className:u().pContainer,children:(0,a.jsx)("p",{className:u().pFive,children:null==t?void 0:t.phone})})]}),(0,a.jsxs)("div",{className:u().liContainer,children:[(0,a.jsx)("h5",{className:u().headerFive,children:"Ваш Telegram/Instagram"}),(0,a.jsx)("div",{className:u().pContainer,children:(0,a.jsx)("p",{className:u().pFive,children:null==t?void 0:t.telegram_instagram})})]})]})}),(0,a.jsx)("div",{className:u().containerButton,children:(0,a.jsx)(s.Z,{className:u().button,onClick:()=>n(!0),variant:"contained",color:"primary",type:"submit",style:{backgroundColor:"black",color:"white"},children:"Редактировать"})}),(0,a.jsx)(v,{open:e,setOpen:n,userInfo:t,setUserInfo:r})]})}var g=t(34355),y=t.n(g);let N=async()=>{try{let e=await fetch("".concat("http://localhost:3377/api/","account/profile/orders"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),n=await e.json(),{status:t}=await e;if(403===t||402===t||203===t||500===t)return{info:n.message,orders:[]};if(200===t&&Array.isArray(n))return{info:"",orders:n};return{info:"Unknown status",orders:[]}}catch(e){return console.log(e),{info:"Error occurred",orders:[]}}};var b=t(51560),Z=t.n(b),w=t(38227),k=t(60888),D=t(67599),P=t(90244),I=t(25883);function O(e){var n;let{order:t}=e;return(0,a.jsxs)("div",{className:Z().mainContainer,children:[(0,a.jsxs)("div",{className:Z().headerContainer,children:[(0,a.jsx)("div",{className:Z().leftSideContainer,children:(0,a.jsxs)("h4",{children:["Номер заказа: ",t.id]})}),(0,a.jsx)("div",{className:Z().rightSideContainer,children:(0,a.jsx)("h4",{children:"Заказ создан"===t.status||"Уточнение мерок, отправка реквизитов для внесения предоплаты"===t.status?(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(D.Z,{sx:{width:"18px",height:"18px"}}),(0,a.jsx)("span",{style:{marginLeft:"10px"},children:"Заказ создан"})]}):"Ожидание предоплаты"===t.status?(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(P.Z,{sx:{width:"18px",height:"18px"}}),(0,a.jsx)("span",{style:{marginLeft:"10px"},children:"Ожидаем предоплаты"})]}):"Предоплата получена"===t.status||"Задание передано на производство"===t.status||"Обратная связь по заданию от производства"===t.status||"Изделия в производстве"===t.status||"Изделие отшито"===t.status||"Забрали заказ с производства"===t.status?(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(I.Z,{sx:{width:"18px",height:"18px"}}),(0,a.jsx)("span",{style:{marginLeft:"10px"},children:"Заказ отшивается"})]}):"Оповещение клиента, отправка реквизитов для внесения полной оплаты"===t.status?(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(P.Z,{sx:{width:"18px",height:"18px"}}),(0,a.jsx)("span",{style:{marginLeft:"10px"},children:"Ожидаем полной оплаты"})]}):"Получена полная оплата"===t.status||"Заказ отправлен"===t.status?(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(k.Z,{sx:{color:"green",width:"18px",height:"18px"}}),(0,a.jsx)("span",{style:{marginLeft:"10px"},children:"Заказ отшит, оплачен и отправлен"})]}):"Возврат заказа"===t.status||"Перешив заказа"===t.status?(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(I.Z,{sx:{width:"18px",height:"18px"}}),(0,a.jsx)("span",{style:{marginLeft:"10px"},children:"Доработка заказа"})]}):""})})]}),(0,a.jsxs)("div",{className:Z().bodyContainer,children:[(0,a.jsxs)("div",{className:Z().leftBodyContainer,children:[(0,a.jsx)("div",{className:Z().headerComp,children:(0,a.jsxs)("h4",{children:[(0,a.jsx)("span",{className:Z().boldDarkText,children:"Дата: "}),"  ".concat(t.createdAt.toString().slice(0,10).replace(/-/g,"."))]})}),(0,a.jsx)("div",{className:Z().headerComp,children:(0,a.jsxs)("h4",{children:[(0,a.jsx)("span",{className:Z().boldDarkText,children:"Сумма заказа: "})," ",t.total.toLocaleString().replace(/,\s?/g," ")," ₽"]})}),(0,a.jsx)("div",{className:Z().headerComp,children:(0,a.jsxs)("h4",{children:[(0,a.jsx)("span",{className:Z().boldDarkText,children:"Адрес: "})," ",t.address]})})]}),(0,a.jsx)("div",{className:t.Items.length>1?"".concat(Z().rightBodyContainer," ").concat(Z().wide):"".concat(Z().rightBodyContainer," ").concat(Z().narrow),children:null===(n=t.Items)||void 0===n?void 0:n.map(e=>(0,a.jsx)(w.Z,{item:e},e.id))})]}),(0,a.jsx)("div",{className:Z().footerContainer,children:(0,a.jsxs)("h4",{children:["Комментарии: ",t.comments]})})]})}function S(){let[e,n]=(0,i.useState)([]),[t,s]=(0,i.useState)("");return(0,i.useEffect)(()=>{let e=async()=>{let{info:e,orders:t}=await N();s(e);let a=t.sort((e,n)=>n.id-e.id);n(a)};e()},[]),(0,a.jsxs)("div",{className:y().mainDiv,children:[(null==t?void 0:t.length)>0&&(0,a.jsx)("div",{className:y().infoContainer,children:(0,a.jsx)("p",{className:y().infoP,children:t})}),(null==e?void 0:e.length)>0?(0,a.jsx)(a.Fragment,{children:e.map(e=>(0,a.jsx)(O,{order:e},e.id))}):(0,a.jsx)(a.Fragment,{})]})}var T=t(1935),E=t(9008),M=t.n(E),L=t(9473),z=t(11163);function B(){let[e,n]=(0,i.useState)(!1),[t,r]=(0,i.useState)("profile"),d=(0,z.useRouter)(),u=(0,L.v9)(e=>e.sessionSlice.session);return(0,i.useEffect)(()=>{u||d.push("/signin")},[u]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(M(),{children:[(0,a.jsx)("title",{children:"Cape&Coat | Профиль"}),(0,a.jsx)("meta",{name:"title",content:"Cape and Coat"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,a.jsx)("meta",{name:"robots",content:"noindex,nofollow"})]}),u&&(0,a.jsxs)("div",{className:o().mainDiv,children:[(0,a.jsxs)("div",{className:o().routesDiv,children:[(0,a.jsx)(s.Z,{onClick:()=>r("favorites"),className:o().button,children:"Избранное"}),(0,a.jsx)(s.Z,{onClick:()=>r("profile"),className:o().button,type:"button",children:"Данные"}),(0,a.jsx)(s.Z,{onClick:()=>r("orders"),className:o().button,type:"button",children:"Заказы"}),(0,a.jsxs)(s.Z,{onClick:()=>n(!0),className:o().button,type:"button",children:[(0,a.jsx)(l.Z,{}),"Выйти"]}),(0,a.jsx)(T.Z,{open:e,setOpen:n})]}),(0,a.jsx)("div",{className:o().elContainer,children:(()=>{switch(t){case"favorites":return(0,a.jsx)(c.Z,{});case"profile":return(0,a.jsx)(C,{});case"orders":return(0,a.jsx)(S,{});default:return null}})()})]})]})}},14623:function(e){e.exports={formDiv:"ModalEditInfo_formDiv__yKsyk",container:"ModalEditInfo_container__ba7vO",button:"ModalEditInfo_button__xKN9x",infoDiv:"ModalEditInfo_infoDiv__T0TIf",infoP:"ModalEditInfo_infoP__QvI0C"}},51560:function(e){e.exports={mainContainer:"OrderComp_mainContainer__569jj",headerContainer:"OrderComp_headerContainer__zunyZ",bodyContainer:"OrderComp_bodyContainer__nmQCq",leftBodyContainer:"OrderComp_leftBodyContainer__nC_yI",rightBodyContainer:"OrderComp_rightBodyContainer___aPY3",wide:"OrderComp_wide__qxXTa",narrow:"OrderComp_narrow__01rms",headerComp:"OrderComp_headerComp__fcS7G",footerContainer:"OrderComp_footerContainer__4Pj6L",boldDarkText:"OrderComp_boldDarkText__JkQ3t",rightSideContainer:"OrderComp_rightSideContainer__R4KdO"}},34355:function(e){e.exports={mainDiv:"Orders_mainDiv__XKCUP",infoContainer:"Orders_infoContainer__P_g87",infoP:"Orders_infoP__ITaNi"}},63504:function(e){e.exports={mainDiv:"Profile_mainDiv__dbON_",mainContainer:"Profile_mainContainer__Szs6h",container:"Profile_container__V5MdI",liContainer:"Profile_liContainer__DoTSO",button:"Profile_button___Sop_",containerButton:"Profile_containerButton__HI6aG",headerDiv:"Profile_headerDiv__3k6OK",headerFive:"Profile_headerFive__zd5_A",pFive:"Profile_pFive__HWEyU"}},40547:function(e){e.exports={mainContainer:"sureModal_mainContainer__slDQc",box:"sureModal_box__z6eDO",questionContainer:"sureModal_questionContainer__LCWBw",buttonContainer:"sureModal_buttonContainer__0x1_l",buttonExit:"sureModal_buttonExit__rpXvK",button:"sureModal_button__BShyu"}},7561:function(e){e.exports={mainDiv:"Account_mainDiv__hBBgK",routesDiv:"Account_routesDiv__2R2IG",elContainer:"Account_elContainer__xFzze",button:"Account_button__FPUfV",hideText:"Account_hideText__VnjLU"}}},function(e){e.O(0,[9236,5816,1903,8572,9774,2888,179],function(){return e(e.s=682)}),_N_E=e.O()}]);