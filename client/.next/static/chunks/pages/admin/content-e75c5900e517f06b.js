(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3871],{60888:function(e,t,a){"use strict";var n=a(64836);t.Z=void 0;var i=n(a(64938)),l=a(85893),r=(0,i.default)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.Z=r},13540:function(e,t,a){"use strict";var n=a(64836);t.Z=void 0;var i=n(a(64938)),l=a(85893),r=(0,i.default)((0,l.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout");t.Z=r},87357:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var n=a(87462),i=a(63366),l=a(67294),r=a(90512),o=a(49731),s=a(86523),c=a(39707),d=a(96682),u=a(85893);let m=["className","component"];var h=a(37078),p=a(68239),x=a(10606);let f=(0,p.Z)(),_=function(e={}){let{themeId:t,defaultTheme:a,defaultClassName:h="MuiBox-root",generateClassName:p}=e,x=(0,o.ZP)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(s.Z),f=l.forwardRef(function(e,l){let o=(0,d.Z)(a),s=(0,c.Z)(e),{className:f,component:_="div"}=s,g=(0,i.Z)(s,m);return(0,u.jsx)(x,(0,n.Z)({as:_,ref:l,className:(0,r.Z)(f,p?p(h):h),theme:t&&o[t]||o},g))});return f}({themeId:x.Z,defaultTheme:f,defaultClassName:"MuiBox-root",generateClassName:h.Z.generate});var g=_},39707:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var n=a(87462),i=a(63366),l=a(59766),r=a(44920);let o=["sx"],s=e=>{var t,a;let n={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(a=e.theme)?void 0:a.unstable_sxConfig)?t:r.Z;return Object.keys(e).forEach(t=>{i[t]?n.systemProps[t]=e[t]:n.otherProps[t]=e[t]}),n};function c(e){let t;let{sx:a}=e,r=(0,i.Z)(e,o),{systemProps:c,otherProps:d}=s(r);return t=Array.isArray(a)?[c,...a]:"function"==typeof a?(...e)=>{let t=a(...e);return(0,l.P)(t)?(0,n.Z)({},c,t):c}:(0,n.Z)({},c,a),(0,n.Z)({},d,{sx:t})}},43705:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/content",function(){return a(2644)}])},14173:function(e,t,a){"use strict";a.d(t,{MO:function(){return o},Zg:function(){return i},_P:function(){return l},eQ:function(){return r}});var n=a(6154);let i=async function(e,t,a){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;try{if(l==="create-".concat(a)){let r=await n.Z.post("".concat("http://localhost:3377/api/","admin/").concat(a,"/").concat(l),i,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}),o=await r.data;return t(e=>o.message),e(e=>[...e,o.res]),o}if(l==="delete-".concat(a)){let i=await n.Z.delete("".concat("http://localhost:3377/api/","admin/").concat(a,"/").concat(l,"/").concat(r),{withCredentials:!0}),o=await i.data;return e(e=>[...e.filter(e=>e.id!==r)]),t(e=>o.message),o}if(l==="update-".concat(a)){let o=await n.Z.patch("".concat("http://localhost:3377/api/","admin/").concat(a,"/").concat(l,"/").concat(r),i,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}),s=await o.data;return e(e=>{let t=e.map(e=>e.id===r?{...s.res,Photos:e.Photos}:e);return t}),t(e=>s.message),s}if(void 0===l){let t=await n.Z.get("".concat("http://localhost:3377/api/","admin/").concat(a,"/read-").concat(a),{withCredentials:!0}),i=await t.data;return e(i.res),i}}catch(e){console.log(e)}},l=async e=>{try{let t=await fetch("".concat("http://localhost:3377/api/","admin/order/allorder"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),a=await t.json();e(a.allOrder)}catch(e){console.log(e)}},r=async(e,t,a)=>{let n=await fetch("".concat("http://localhost:3377/api/","admin/order/updateOrderField/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({[t]:a})});return await n.json()},o=async(e,t,a,n)=>{let i=await fetch("".concat("http://localhost:3377/api/","admin/order/updateOrderItemField/").concat(e,"/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({[a]:n})});return await i.json()}},19316:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var n=a(85893);a(67294);var i=a(87357),l=a(12463),r=a(60888);let o={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,height:130,bgcolor:"#eee",border:"1px solid #000",boxShadow:10,p:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"};function s(e){let{open:t,setOpen:a,info:s}=e;return(0,n.jsx)(l.Z,{open:t,onClose:()=>a(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)(i.Z,{sx:o,children:[(0,n.jsx)("h3",{children:s}),(0,n.jsx)(r.Z,{sx:{color:"green",width:"50px",height:"50px"}})]})})}},1935:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var n=a(85893),i=a(67294),l=a(87357),r=a(83321),o=a(12463),s=a(40547),c=a.n(s),d=a(62344),u=a(9473),m=a(41602),h=a(11163);function p(e){let{open:t,setOpen:a}=e,s=(0,u.I0)(),p=(0,h.useRouter)(),[x,f]=(0,i.useState)(""),_=async e=>{e.preventDefault();try{await s((0,d.Ew)()),f("Вы вышли из аккаунта"),a(!1),s((0,m.bV)({isLogin:!1,user:"",isAdmin:!1})),p.push("/")}catch(e){console.log(e)}};return(0,n.jsx)(o.Z,{open:t,onClose:()=>a(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsx)(l.Z,{className:c().box,children:(0,n.jsxs)("div",{className:c().mainContainer,children:[x.length>0&&(0,n.jsx)("p",{children:x}),(0,n.jsx)("div",{className:c().questionContainer,children:(0,n.jsx)("h3",{children:"Вы уверены, что хотите выйти из аккаунта?"})}),(0,n.jsxs)("div",{className:c().buttonContainer,children:[(0,n.jsx)(r.Z,{onClick:()=>a(!1),className:c().button,type:"submit",variant:"contained",color:"secondary",children:"Отмена"}),(0,n.jsx)(r.Z,{onClick:_,className:c().buttonExit,type:"submit",variant:"contained",color:"primary",children:"Выйти"})]})]})})})}},99105:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var n=a(85893),i=a(9008),l=a.n(i),r=a(67294),o=a(19179),s=a.n(o),c=a(83321),d=a(41664),u=a.n(d),m=a(11163),h=a(13540),p=a(1935);function x(){let e=(0,m.useRouter)(),[t,a]=(0,r.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l(),{children:[(0,n.jsx)("title",{children:"Cape&Coat | Кабинет администратора"}),(0,n.jsx)("meta",{name:"title",content:"Cape and Coat"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)("div",{className:s().mainDiv,children:(0,n.jsxs)("div",{className:s().routesDiv,children:[(0,n.jsx)(u(),{href:"/admin/promo",children:(0,n.jsx)(c.Z,{className:"".concat(s().button," ").concat("/admin/promo"===e.pathname?s().active:""),children:"Промокоды"})}),(0,n.jsx)(u(),{href:"/admin/content",children:(0,n.jsx)(c.Z,{className:"".concat(s().button," ").concat("/admin/content"===e.pathname?s().active:""),children:"Добавить контент"})}),(0,n.jsx)(u(),{href:"/admin/ordersHistory",children:(0,n.jsx)(c.Z,{className:"".concat(s().button," ").concat("/admin/ordersHistory"===e.pathname?s().active:""),children:"История заказов"})}),(0,n.jsx)(u(),{href:"/admin/tasks",children:(0,n.jsx)(c.Z,{className:"".concat(s().button," ").concat("/admin/tasks"===e.pathname?s().active:""),children:"Заказы в работе"})}),(0,n.jsx)(u(),{href:"/admin/newOrder",children:(0,n.jsx)(c.Z,{className:"".concat(s().button," ").concat("/admin/newOrder"===e.pathname?s().active:""),children:"Создать заказ"})}),(0,n.jsx)(u(),{href:"#",children:(0,n.jsxs)(c.Z,{onClick:()=>a(!0),className:s().button,type:"button",children:[(0,n.jsx)(h.Z,{}),"Выйти"]})})]})}),(0,n.jsx)(p.Z,{open:t,setOpen:a})]})}},2644:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return q}});var n=a(85893),i=a(67294),l=a(3046),r=a.n(l),o=a(99105),s=a(12463),c=a(14173),d=a(12455),u=a.n(d),m=a(19316),h=a(61903);function p(e){let t="new_price"===e.name&&e.formData.in_stock;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(h.Z,{value:e.value,style:{marginBottom:"10px"},autoComplete:"off",required:t,onChange:e.changeHandler,name:e.name,type:e.types,fullWidth:!0,label:e.label,id:"fullWidth",InputLabelProps:{style:{fontWeight:"700",color:"rgba(90, 90, 90, 0.833)"}}})})}function x(e){let t=e.formData;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p,{changeHandler:e.changeHandler,name:"name",label:"Название",types:"text",value:t.name}),(0,n.jsx)(p,{changeHandler:e.changeHandler,name:"article",label:"Артикул",types:"number",value:t.article}),(0,n.jsx)(p,{changeHandler:e.changeHandler,name:"description",label:"Описание",types:"text",value:t.description}),(0,n.jsx)(p,{changeHandler:e.changeHandler,name:"model_params",label:"Параметры модели",types:"text",value:t.model_params}),(0,n.jsx)(p,{changeHandler:e.changeHandler,name:"characteristics",label:"Характеристики",types:"text",value:t.characteristics}),(0,n.jsx)(p,{changeHandler:e.changeHandler,name:"price",label:"Цена",types:"number",value:t.price}),(0,n.jsx)(p,{changeHandler:e.changeHandler,name:"new_price",label:"Новая цена",types:"number",value:t.new_price,formData:t})]})}var f=a(94054),_=a(33841),g=a(10315),b=a(9840);function j(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(f.Z,{sx:{m:1,minWidth:220},children:[(0,n.jsx)(_.Z,{style:{fontWeight:"700",color:"rgba(90, 90, 90, 0.833)"},id:"demo-simple-select-autowidth-label",children:e.infoText}),(0,n.jsx)(g.Z,{onChange:t=>{e.handleChange(t),e.changeHandlerDescription(t)},labelId:"demo-simple-select-autowidth-label",id:"demo-simple-select-autowidth",value:e.valueState,defaultValue:e.valueState,name:e.name,autoWidth:!0,label:e.label,children:e.arr.map(e=>(0,n.jsx)(b.Z,{value:e.id,children:e.name},e.id))})]})})}function C(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"start"},children:[(0,n.jsx)("h5",{style:{color:" rgba(90, 90, 90, 0.833)",fontSize:"1rem",marginBottom:"10px",fontWeight:"700"},children:e.text}),(0,n.jsx)("label",{htmlFor:"fileCatInput",style:{padding:"5px 10px",border:"1px solid rgba(90, 90, 90, 0.3)",borderRadius:"5px",cursor:"pointer"},children:"Выберите файлы"}),(0,n.jsx)("input",{id:"fileCatInput",required:!0,filename:e.files,onChange:e.changeHandlerFiles,type:"file",accept:"image/*",multiple:!!e.shouldAllowMultiple,style:{display:"none"}})]})})}function v(e){let[t,a]=(0,i.useState)(e.defaultChecked||!1);return(0,i.useEffect)(()=>{a(e.checked||!1)},[e.checked]),(0,n.jsxs)("div",{style:{display:"flex",marginBottom:"1rem"},children:[(0,n.jsx)("input",{placeholder:e.placeholder,onChange:t=>{let n=t.target.checked;a(n),e.changeCheckboxHandler(e.name,n)},type:"checkbox",name:e.name,checked:t}),(0,n.jsx)("div",{style:{fontWeight:"700",color:"rgba(90, 90, 90, 0.833)",marginLeft:"8px"},children:e.label})]})}var y=a(83321);function Z(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(y.Z,{onClick:t=>e.submit(t,e.url),type:"submit",style:{fontWeight:"700",color:" rgb(220, 220, 220)",backgroundColor:"rgba(90, 90, 90, 0.833)",marginTop:"25px"},variant:"contained",children:e.label})})}var N=a(87357);function w(e){let{openChange:t,setOpenChange:a,id:l,setContent:r,open:o,setOpen:d,message:h,setMessage:p,itemData:f}=e,_=(0,i.useRef)(null),[g,b]=(0,i.useState)({}),[y,w]=(0,i.useState)({category_id:1,collection_id:1,material_id:1,in_stock:!1,bestseller:!1}),[S,M]=(0,i.useState)([]),[k,D]=(0,i.useState)([]),[H,O]=(0,i.useState)([]),[T,E]=(0,i.useState)(""),[F,A]=(0,i.useState)(""),[I,B]=(0,i.useState)(""),P="item",[z,L]=(0,i.useState)({name:"",article:"",description:"",model_params:"",characteristics:"",price:"",new_price:"",in_stock:!1,purchased:!1,bestseller:!1,collection_id:1,material_id:1,category_id:1}),[W,q]=(0,i.useState)(!1),R=()=>{L({name:"",article:"",description:"",model_params:"",characteristics:"",price:"",new_price:"",in_stock:!1,purchased:!1,bestseller:!1,collection_id:1,material_id:1,category_id:1}),E(""),A(""),B("")};(0,i.useEffect)(()=>{null!==f&&(L({name:f.name||"",article:f.article||"",description:f.description||"",model_params:f.model_params||"",characteristics:f.characteristics||"",price:f.price||"",new_price:f.new_price||"",in_stock:f.in_stock||!1,purchased:f.purchased||!1,bestseller:f.bestseller||!1,collection_id:f.collection_id||1,material_id:f.material_id||1,category_id:f.category_id||1}),E(f.category_id||1),A(f.collection_id||1),B(f.material_id||1))},[f]),(0,i.useEffect)(()=>{(0,c.Zg)(M,p,"category"),(0,c.Zg)(D,p,"collection"),(0,c.Zg)(O,p,"material")},[]),(0,i.useEffect)(()=>{t||R()},[t]);let V=e=>{let{name:t,value:a}=e.target;w({...y,[t]:a}),L({...z,[t]:a})},X=(e,t)=>{w({...y,[e]:t}),L({...z,[e]:t}),"in_stock"===e&&q(!!t)},J=async(e,t)=>{try{if(e.preventDefault(),z.in_stock&&!z.new_price){p("Заполните поле с новой ценой"),d(!0),setTimeout(()=>{p(""),d(!1)},1e3);return}let n=new FormData;if(t==="create-".concat(P)||t==="update-".concat(P)&&g)for(let e in g.photos)n.append("photos",g.photos[e]);n.append("description",JSON.stringify(y)),await (0,c.Zg)(r,p,P,n,t,l),d(!0),setTimeout(()=>{p(""),d(!1)},1e3),_.current.reset(),a(!1)}catch(e){console.log(e)}};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.Z,{className:u().modal,open:t,onClose:()=>a(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)("div",{className:u().mainContainer,children:[(0,n.jsxs)("form",{ref:_,onSubmit:J,encType:"multipart/form-data",className:u().formContainer,children:[(0,n.jsxs)("div",{className:u().selectContainer,children:[(0,n.jsx)(j,{styleSize:"200",infoText:"Выберите коллекцию",arr:k,valueState:F,name:"collection_id",label:"collection",handleChange:e=>{A(e.target.value)},changeHandlerDescription:V}),(0,n.jsx)(j,{styleSize:"200",infoText:"Выберите категорию",arr:S,valueState:T,name:"category_id",label:"category",handleChange:e=>{E(e.target.value)},changeHandlerDescription:V}),(0,n.jsx)(j,{infoText:"Выберите материал",arr:H,valueState:I,name:"material_id",label:"material",handleChange:e=>{B(e.target.value)},changeHandlerDescription:V,required:W})]}),(0,n.jsx)(N.Z,{className:u().inputBox,children:(0,n.jsx)(x,{changeHandler:V,formData:z})}),(0,n.jsxs)("div",{className:u().checkBoxContainer,children:[(0,n.jsxs)("div",{className:u().checkBoxMiniContainer,children:[(0,n.jsx)(v,{changeCheckboxHandler:X,name:"bestseller",placeholder:"bestseller",label:" bestseller",checked:z.bestseller}),(0,n.jsx)(v,{changeCheckboxHandler:X,name:"in_stock",placeholder:"in_stock",label:" В наличии",checked:z.in_stock})]}),(0,n.jsx)(C,{file:g,changeHandlerFiles:e=>{b({...g,photos:e.target.files})},shouldAllowMultiple:!0}),void 0===l?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Z,{label:"Добавить",submit:J,url:"create-item"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z,{label:"Изменить",submit:J,url:"update-item"}),(0,n.jsx)(Z,{label:"Удалить",submit:J,url:"delete-item"})]})]})]}),(0,n.jsx)(m.Z,{info:h,open:o,setOpen:d})]})})})}var S=a(56082),M=a.n(S);function k(e){let{openChange:t,setOpenChange:a,open:l,setOpen:r,message:o,setMessage:d}=e,u=(0,i.useRef)(null),[h,x]=(0,i.useState)(),[f,_]=(0,i.useState)({}),[g,b]=(0,i.useState)([]),[v,y]=(0,i.useState)(""),N="category",w=f.category_id;(0,i.useEffect)(()=>{(0,c.Zg)(b,d,N)},[]);let S=e=>{_({...f,[e.target.name]:e.target.value})},k=async(e,t)=>{try{e.preventDefault();let n=new FormData;if(t==="create-".concat(N)||t==="update-".concat(N)&&h)for(let e in h.photos)n.append("photos",h.photos[e]);n.append("description",JSON.stringify(f)),await Object.fromEntries(n.entries()),await (0,c.Zg)(b,d,N,n,t,w),r(!0),setTimeout(()=>{d(""),r(!1)},1e3),a(!1),u.current.reset()}catch(e){console.log(e)}};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.Z,{className:M().modal,open:t,onClose:()=>a(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)("div",{className:M().mainContainer,children:[(0,n.jsx)("div",{className:M().headerDiv,children:(0,n.jsx)("h2",{children:"Категория"})}),(0,n.jsxs)("form",{ref:u,onSubmit:k,encType:"multipart/form-data",className:M().formContainer,children:[(0,n.jsx)("div",{className:M().selectContainer,children:(0,n.jsx)(j,{styleSize:"200",infoText:"Выберите категорию",arr:g,valueState:v,name:"category_id",label:"category",handleChange:e=>{y(e.target.value)},changeHandlerDescription:S})}),(0,n.jsxs)("div",{className:M().inputContainer,children:[(0,n.jsx)(p,{changeHandler:S,name:"name",label:"Название",types:"text"}),(0,n.jsx)(p,{changeHandler:S,name:"urlName",label:"Английское название",types:"text"})]}),(0,n.jsx)("div",{className:M().inputContainer,children:(0,n.jsx)(C,{text:"Фото категории",file:h,changeHandlerFiles:e=>{x({...h,photos:e.target.files})},shouldAllowMultiple:!1})}),(0,n.jsxs)("div",{className:M().buttonContainer,children:[(0,n.jsx)(Z,{label:"Добавить",submit:k,url:"create-category"}),(0,n.jsx)(Z,{label:"Изменить",submit:k,url:"update-category"}),(0,n.jsx)(Z,{label:"Удалить",submit:k,url:"delete-category"})]})]}),(0,n.jsx)("div",{}),(0,n.jsx)(m.Z,{info:o,open:l,setOpen:r})]})})})}var D=a(65603),H=a.n(D);function O(e){let{openChange:t,setOpenChange:a,open:l,setOpen:r,message:o,setMessage:d}=e,u=(0,i.useRef)(null),[h,x]=(0,i.useState)(),[f,_]=(0,i.useState)({}),[g,b]=(0,i.useState)([]),[y,N]=(0,i.useState)(""),w="collection",S=f.collection_id;(0,i.useEffect)(()=>{(0,c.Zg)(b,d,w)},[]);let M=e=>{_({...f,[e.target.name]:e.target.value})},k=async(e,t)=>{try{e.preventDefault();let n=new FormData;if(t==="create-".concat(w)||t==="update-".concat(w)&&h)for(let e in h.photos)n.append("photos",h.photos[e]);n.append("description",JSON.stringify(f)),await Object.fromEntries(n.entries()),await (0,c.Zg)(b,d,w,n,t,S),r(!0),setTimeout(()=>{d(""),r(!1)},1e3),a(!1),u.current.reset()}catch(e){console.log(e)}};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.Z,{className:H().modal,open:t,onClose:()=>a(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)("div",{className:H().mainContainer,children:[(0,n.jsx)("div",{className:H().headerDiv,children:(0,n.jsx)("h2",{children:"Коллекция"})}),(0,n.jsxs)("form",{ref:u,onSubmit:k,encType:"multipart/form-data",className:H().formContainer,children:[(0,n.jsx)("div",{className:H().selectContainer,children:(0,n.jsx)(j,{styleSize:"200",infoText:"Выберите коллекцию",arr:g,valueState:y,name:"collection_id",label:"collection",handleChange:e=>{N(e.target.value)},changeHandlerDescription:M})}),(0,n.jsxs)("div",{className:H().inputContainer,children:[(0,n.jsx)(p,{changeHandler:M,name:"name",label:"Название",types:"text"}),(0,n.jsx)(p,{changeHandler:M,name:"description",label:"Описание",types:"text"}),(0,n.jsx)(p,{changeHandler:M,name:"urlName",label:"Английское название",types:"text"})]}),(0,n.jsx)("div",{className:H().inputContainer,children:(0,n.jsx)(v,{changeHandler:e=>{_({...f,[e.target.name]:e.target.checked})},name:"current",placeholder:"current",label:" Актуальность"})}),(0,n.jsx)("div",{className:H().inputContainer,children:(0,n.jsx)(C,{text:"Фото коллекции",file:h,changeHandlerFiles:e=>{x({...h,photos:e.target.files})},shouldAllowMultiple:!1})}),(0,n.jsxs)("div",{className:H().buttonContainer,children:[(0,n.jsx)(Z,{label:"Добавить",submit:k,url:"create-collection"}),(0,n.jsx)(Z,{label:"Изменить",submit:k,url:"update-collection"}),(0,n.jsx)(Z,{label:"Удалить",submit:k,url:"delete-collection"})]})]}),(0,n.jsx)("div",{}),(0,n.jsx)(m.Z,{info:o,open:l,setOpen:r})]})})})}var T=a(22523),E=a.n(T);function F(e){let{openChange:t,setOpenChange:a,open:l,setOpen:r,message:o,setMessage:d}=e,u=(0,i.useRef)(null),[h,x]=(0,i.useState)(),[f,_]=(0,i.useState)({}),[g,b]=(0,i.useState)([]),[v,y]=(0,i.useState)([]),[N,w]=(0,i.useState)(""),[S,M]=(0,i.useState)(""),k="material",D=f.material_id;(0,i.useEffect)(()=>{(0,c.Zg)(b,d,"category"),(0,c.Zg)(y,d,k)},[]);let H=e=>{_({...f,[e.target.name]:e.target.value})},O=async(e,t)=>{try{e.preventDefault();let n=new FormData;if(t==="create-".concat(k)||t==="update-".concat(k)&&h)for(let e in h.photos)n.append("photos",h.photos[e]);n.append("description",JSON.stringify(f)),await Object.fromEntries(n.entries()),await (0,c.Zg)(y,d,k,n,t,D),r(!0),setTimeout(()=>{d(""),r(!1)},1e3),a(!1),u.current.reset()}catch(e){console.log(e)}};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.Z,{className:E().modal,open:t,onClose:()=>a(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)("div",{className:E().mainContainer,children:[(0,n.jsx)("div",{className:E().headerDiv,children:(0,n.jsx)("h2",{children:"Материал"})}),(0,n.jsxs)("form",{ref:u,onSubmit:O,encType:"multipart/form-data",className:E().formContainer,children:[(0,n.jsxs)("div",{className:E().selectContainer,children:[(0,n.jsx)(j,{styleSize:"200",infoText:"Выберите категорию",arr:g,valueState:S,name:"category_id",label:"category",handleChange:e=>{M(e.target.value)},changeHandlerDescription:H}),(0,n.jsx)(j,{styleSize:"200",infoText:"Выберите материал",arr:v,valueState:N,name:"material_id",label:"material",handleChange:e=>{w(e.target.value)},changeHandlerDescription:H})]}),(0,n.jsx)("div",{className:E().inputContainer,children:(0,n.jsx)(p,{changeHandler:H,name:"name",label:"Имя",types:"text"})}),(0,n.jsx)("div",{className:E().inputContainer,children:(0,n.jsx)(C,{text:"Фото материала",file:h,changeHandlerFiles:e=>{x({...h,photos:e.target.files})},shouldAllowMultiple:!1})}),(0,n.jsxs)("div",{className:E().buttonContainer,children:[(0,n.jsx)(Z,{label:"Добавить",submit:O,url:"create-material"}),(0,n.jsx)(Z,{label:"Изменить",submit:O,url:"update-material"}),(0,n.jsx)(Z,{label:"Удалить",submit:O,url:"delete-material"})]})]}),(0,n.jsx)("div",{}),(0,n.jsx)(m.Z,{info:o,open:l,setOpen:r})]})})})}var A=a(83719),I=a.n(A),B=a(25675),P=a.n(B);function z(e){let t=(t,a)=>{console.log("props",a),e.handleOpenItem(a),e.setId(e=>t)},a=e.content&&e.content[0]?Object.keys(e.content[0]).filter(e=>"createdAt"!==e&&"updatedAt"!==e):[];return(0,n.jsx)("div",{className:I().mainContainer,children:(0,n.jsxs)("table",{className:I().table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[a.map(e=>(0,n.jsx)("th",{children:e},e)),(0,n.jsx)("th",{children:"Отредактировать"})]})}),(0,n.jsx)("tbody",{children:e.content.map(e=>(0,n.jsxs)("tr",{children:[a.map(t=>(0,n.jsx)("td",{children:"in_stock"===t||"purchased"===t||"bestseller"===t?(0,n.jsx)("input",{type:"checkbox",checked:e[t],disabled:!0}):"Photos"===t&&e.Photos&&e.Photos.length>0?(0,n.jsx)("div",{className:I().photoContainer,children:(0,n.jsx)(P(),{src:"".concat("http://localhost:3377/items/").concat(e.Photos[0].photo),alt:e.name,width:50,height:75})}):e[t]},t)),(0,n.jsx)("td",{children:(0,n.jsxs)("button",{className:I().button,onClick:()=>t(e.id,e),type:"button",children:["Изменить №",e.id]})})]},e.id))})]})})}var L=a(9473),W=a(11163);function q(){let[e,t]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1),[s,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),[p,x]=(0,i.useState)(!1),[f,_]=(0,i.useState)(""),[g,b]=(0,i.useState)(),[j,C]=(0,i.useState)(null);(0,i.useEffect)(()=>{u||b(void 0)},[u]);let v=e=>{h(!0),C(e)},[Z,N]=(0,i.useState)([]);(0,i.useEffect)(()=>{(0,c.Zg)(N,_,"item")},[]);let S=(0,L.v9)(e=>e.sessionSlice.isAdmin);return(0,W.useRouter)(),(0,n.jsx)(n.Fragment,{children:S&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{}),(0,n.jsxs)("div",{className:r().routesDiv,children:[(0,n.jsx)(y.Z,{className:r().button,onClick:()=>v(null),type:"button",children:"Добавить товар"}),(0,n.jsx)(y.Z,{className:r().button,onClick:()=>t(!0),type:"button",children:"Добавить категорию"}),(0,n.jsx)(y.Z,{className:r().button,onClick:()=>l(!0),type:"button",children:"Добавить коллекцию"}),(0,n.jsx)(y.Z,{className:r().button,onClick:()=>d(!0),type:"button",children:"Добавить материал"})]}),(0,n.jsx)(z,{content:Z,setContent:N,message:f,setMessage:_,handleOpenItem:v,setId:b}),(0,n.jsx)(w,{openChange:u,setOpenChange:h,id:g,setContent:N,open:p,setOpen:x,message:f,setMessage:_,itemData:j}),(0,n.jsx)(F,{openChange:s,setOpenChange:d,open:p,setOpen:x,message:f,setMessage:_}),(0,n.jsx)(k,{openChange:e,setOpenChange:t,open:p,setOpen:x,message:f,setMessage:_}),(0,n.jsx)(O,{openChange:a,setOpenChange:l,open:p,setOpen:x,message:f,setMessage:_}),(0,n.jsx)(m.Z,{info:f,open:p,setOpen:x})]})})}},83719:function(e){e.exports={mainContainer:"ItemTable_mainContainer__Y22VI",table:"ItemTable_table__OzVAq",button:"ItemTable_button__gETJY"}},56082:function(e){e.exports={modal:"CatModal_modal__8AFeB",mainContainer:"CatModal_mainContainer__q317B",headerDiv:"CatModal_headerDiv__K4vUy",selectContainer:"CatModal_selectContainer__EkPqS",formContainer:"CatModal_formContainer__wlgjp",inputContainer:"CatModal_inputContainer__PkczB",buttonContainer:"CatModal_buttonContainer__E3a9L"}},65603:function(e){e.exports={modal:"ColModal_modal__w7iTU",mainContainer:"ColModal_mainContainer__KsXKW",headerDiv:"ColModal_headerDiv__dOmPD",selectContainer:"ColModal_selectContainer__VtAvI",formContainer:"ColModal_formContainer__v9Rbd",inputContainer:"ColModal_inputContainer__w6dYr",buttonContainer:"ColModal_buttonContainer__2NCZK"}},12455:function(e){e.exports={modal:"ItemModal_modal___EC85",mainContainer:"ItemModal_mainContainer__cRLp6",formContainer:"ItemModal_formContainer__pVywE",selectContainer:"ItemModal_selectContainer__LhdLp",inputBox:"ItemModal_inputBox__ErrU3",checkBoxContainer:"ItemModal_checkBoxContainer__oBAAF",checkBoxMiniContainer:"ItemModal_checkBoxMiniContainer__qaV1l"}},22523:function(e){e.exports={modal:"MatModal_modal__tjXkM",mainContainer:"MatModal_mainContainer__hjMdQ",headerDiv:"MatModal_headerDiv__zh7Bl",buttonContainer:"MatModal_buttonContainer__TeAUg",formContainer:"MatModal_formContainer__qIu6w",selectContainer:"MatModal_selectContainer__2xfp_",inputContainer:"MatModal_inputContainer__97mjZ"}},40547:function(e){e.exports={mainContainer:"sureModal_mainContainer__slDQc",box:"sureModal_box__z6eDO",questionContainer:"sureModal_questionContainer__LCWBw",buttonContainer:"sureModal_buttonContainer__0x1_l",buttonExit:"sureModal_buttonExit__rpXvK",button:"sureModal_button__BShyu"}},19179:function(e){e.exports={mainDiv:"NavAdminComp_mainDiv__nDAGz",routesDiv:"NavAdminComp_routesDiv__XCXCB",button:"NavAdminComp_button__yXVpz",active:"NavAdminComp_active__OeWo_",hideText:"NavAdminComp_hideText__yGaFu"}},3046:function(e){e.exports={routesDiv:"Content_routesDiv__jzA8K",button:"Content_button__VLoEd"}},9008:function(e,t,a){e.exports=a(73902)}},function(e){e.O(0,[5816,1903,9774,2888,179],function(){return e(e.s=43705)}),_N_E=e.O()}]);